<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Tic Tac Toe</title>
    <style>
        body { font-family: Arial, sans-serif; }
        #board { display: grid; grid-template-columns: repeat(3, 100px); gap: 5px; }
        .cell { width: 100px; height: 100px; text-align: center; font-size: 24px; cursor: pointer; border: 1px solid #000; }
        #score { margin-top: 20px; }
    </style>
</head>
<body>
    <h1>Advanced Tic Tac Toe Against AI</h1>
    <select id="difficulty">
        <option value="easy">Easy</option>
        <option value="medium">Medium</option>
        <option value="hard">Hard</option>
        <option value="impossible">Impossible</option>
    </select>
    <button onclick="clearBoard()">Clear Board</button>
    <div id="board"></div>
    <div id="score">Score: 0</div>
    <input type="text" id="password" placeholder="Enter password">
    <button onclick="setHighScore()">Set High Score</button>

    <script>
        let score = 0;
        const board = document.getElementById('board');
        const scoreDisplay = document.getElementById('score');
        const passwordInput = document.getElementById('password');
        let difficulty = 'easy';

        document.getElementById('difficulty').addEventListener('change', (event) => {
            difficulty = event.target.value;
        });

        function createBoard() {
            board.innerHTML = '';
            for (let i = 0; i < 9; i++) {
                const cell = document.createElement('div');
                cell.className = 'cell';
                cell.onclick = () => playerMove(cell);
                board.appendChild(cell);
            }
        }

        function playerMove(cell) {
            if (cell.innerHTML === '') {
                cell.innerHTML = 'X';
                if (checkWin()) {
                    alert('You win!');
                    score++;
                    updateScore();
                    createBoard();
                } else {
                    aiMove();
                }
            }
        }

        function aiMove() {
            const emptyCells = [...document.querySelectorAll('.cell')].filter(cell => cell.innerHTML === '');
            let move;
            if (difficulty === 'easy') {
                move = emptyCells[Math.floor(Math.random() * emptyCells.length)];
            } else if (difficulty === 'medium') {
                move = mediumAI(emptyCells);
            } else if (difficulty === 'hard') {
                move = hardAI(emptyCells);
            } else {
                move = impossibleAI(emptyCells);
            }
            move.innerHTML = 'O';
            if (checkWin()) {
                alert('AI wins!');
                createBoard();
            }
        }

        function mediumAI(emptyCells) {
            // Placeholder for medium AI logic
            return emptyCells[Math.floor(Math.random() * emptyCells.length)];
        }

        function hardAI(emptyCells) {
            // Placeholder for hard AI logic
            return emptyCells[0]; // Implement actual logic
        }

        function impossibleAI(emptyCells) {
            // Placeholder for impossible AI logic
            return emptyCells[0]; // Implement actual logic
        }

        function checkWin() {
            const cells = [...document.querySelectorAll('.cell')];
            const winningCombinations = [
                [0, 1, 2], [3, 4, 5], [6, 7, 8],
                [0, 3, 6], [1, 4, 7], [2, 5, 8],
                [0, 4, 8], [2, 4, 6]
            ];
            return winningCombinations.some(combination => {
                const [a, b, c] = combination;
                return cells[a].innerHTML && cells[a].innerHTML === cells[b].innerHTML && cells[a].innerHTML === cells[c].innerHTML;
            });
        }

        function clearBoard() {
            createBoard();
        }

        function updateScore() {
            scoreDisplay.innerHTML = 'Score: ' + score;
        }

        function setHighScore() {
            if (passwordInput.value === 'hi') {
                score = 9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999;
                updateScore();
                alert('High score set!');
            }
        }

        createBoard();
    </script>
</body>
</html>
